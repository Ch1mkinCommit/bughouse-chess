:root {
  --sq-size-primary: min(5vw, 9vh);
  --sq-size-secondary: calc(var(--sq-size-primary) / 1.5);
  --board-size-secondary: calc(var(--sq-size-secondary) * 8);
  --reserve-height-in-squares: 1.5;
}

html, body {
  font-family: Verdana, sans-serif;
  font-size: max(calc(var(--sq-size-primary) * 0.3), 10pt);
  background-color: #1c3a0c;
  color: #e0e0e0;
  height: 100%;
  overflow: visible;  /* disable scroll bars */
}
html {
  display: table;
  margin: auto;
}
body {
  display: table-cell;
  vertical-align: middle;
}
svg {
  overflow: visible;  /* allow shadows outside of svg area */
}

#page {
  display: grid;
  /* TODO: Player name and clock alignment */
  grid-template-areas:
    "   fill-a       fill-x  prim-board  fill-y    fill-k    fill-w      fill-p    "
    "   fill-a       fill-x  prim-board  fill-y  scnd-board  fill-w      fill-p    "
    "prim-name-top   fill-x  prim-board  fill-y  scnd-board  fill-w   scnd-name-top"
    "prim-clock-top  fill-x  prim-board  fill-y  scnd-board  fill-w  scnd-clock-top"
    "   fill-b       fill-x  prim-board  fill-y  scnd-board  fill-w      fill-q    "
    "   fill-b       fill-x  prim-board  score   scnd-board  fill-w      fill-q    "
    "   fill-b       fill-x  prim-board  fill-z  scnd-board  fill-w      fill-q    "
    "   fill-b       fill-x  prim-board  fill-z  scnd-board  fill-w  scnd-clock-bot"
    "   fill-b       fill-x  prim-board  fill-z  scnd-board  fill-w   scnd-name-bot"
    "   fill-b       fill-x  prim-board  fill-z  scnd-board  fill-w      fill-r    "
    "   fill-b       fill-x  prim-board  fill-z    fill-l    fill-w      fill-r    "
    "   fill-b       fill-x  prim-board  fill-z  info-panel  fill-w      fill-r    "
    "prim-clock-bot  fill-x  prim-board  fill-z  info-panel  fill-w      fill-r    "
    "prim-name-bot   fill-x  prim-board  fill-z    fill-m    fill-w      fill-r    "
    "   fill-c       fill-x  prim-board  fill-z    fill-m    fill-w      fill-r    "
  ;
  grid-template-columns:
    auto
    calc(var(--sq-size-primary) * 0.2)
    auto
    calc(var(--sq-size-primary) * 1.2)
    auto
    calc(var(--sq-size-primary) * 0.2)
    auto
  ;
  grid-template-rows:
    calc((var(--sq-size-primary) - var(--sq-size-secondary)) * var(--reserve-height-in-squares))
    /* everything else is `auto` */
  ;
}

#board-primary { grid-area: prim-board; }
#player-name-primary-top { grid-area: prim-name-top; }
#player-name-primary-bottom { grid-area: prim-name-bot; }
#clock-primary-top { grid-area: prim-clock-top; }
#clock-primary-bottom { grid-area: prim-clock-bot; }

#score { grid-area: score; }

#board-secondary { grid-area: scnd-board; }
#player-name-secondary-top { grid-area: scnd-name-top; }
#player-name-secondary-bottom { grid-area: scnd-name-bot; }
#clock-secondary-top { grid-area: scnd-clock-top; }
#clock-secondary-bottom { grid-area: scnd-clock-bot; }

/* TODO: Stabilize info panel position */
#info-panel { grid-area: info-panel; }

.board-shadow {
  fill: #808080;
  stroke: none;
  filter: url(#board-shadow);
}
.board-border {
  fill: none;
  stroke: #000000;
  stroke-width: 0.02;
}

.sq-black {
  fill: #e59349;
}
.sq-white {
  fill: #dfceb4;
}

.on-sq-black {
  fill: #dfceb4;
  font: normal 0.25px sans-serif;
}
.on-sq-white {
  fill: #e59349;
  font: normal 0.25px sans-serif;
}

#opponent-turn-from {
  fill: #acbd38;
  opacity: 0.5;
}
#opponent-turn-to,
#opponent-turn-to-extra {
  fill: #a7c000;
  opacity: 0.5;
}

#pre-turn-from {
  fill: #7238bd;
  opacity: 0.5;
}
#pre-turn-to,
#pre-turn-to-extra {
  fill: #5800c0;
  opacity: 0.5;
}

#drag-start-highlight {
  fill: url(#drag-start-gradient);
}
#drag-over-highlight {
  fill: url(#drag-over-gradient);
}

.draggable {
  cursor: grab;
}
.draggable.dragged {
  cursor: grabbing;
}

.reserve {
  filter: url(#reserve-shadow);
}
#board-primary {
  width: calc(var(--sq-size-primary) * 8);
  height: calc(var(--sq-size-primary) * 11);
  user-select: none;
}
#board-secondary {
  width: calc(var(--sq-size-secondary) * 8);
  height: calc(var(--sq-size-secondary) * 11);
  user-select: none;
}

#player-name-primary-top,
#player-name-primary-bottom {
  text-align: right;
}
#player-name-secondary-top,
#player-name-secondary-bottom {
  text-align: left;
}
#score,
.player-name {
  color: #a4b984;
  padding: calc(var(--sq-size-primary) * 0.1) 0;
}
#score {
  text-align: center;
  white-space: pre;
}

.clock {
  font-family: Monaco, monospace;
  font-size: 150%;
  text-align: center;
  white-space: nowrap;
  min-width: 3em;
  border-radius: calc(var(--sq-size-primary) * 0.2);
  padding: calc(var(--sq-size-primary) * 0.05) calc(var(--sq-size-primary) * 0.1);
  margin: calc(var(--sq-size-primary) * 0.2)  0;
}
.clock-inactive {
  color: #909090;
  background-color: #28351f;
  outline: calc(var(--sq-size-primary) * 0.03) solid #74935f;
}
.clock-active {
  font-weight: bold;
  color: #f0f0f0;
  background-color: #1f5800;
  outline: calc(var(--sq-size-primary) * 0.1) outset #63ba25;
}
.clock-active.clock-low-time {
  font-weight: bold;
  color: #f0f0f0;
  background-color: #435700;
  outline: calc(var(--sq-size-primary) * 0.1) outset #ddd712;
}
.clock-flag {
  font-weight: bold;
  color: #909090;
  background-color: #691400;
  outline: calc(var(--sq-size-primary) * 0.1) solid #bf0000;
}

#info-string {
  font-size: 80%;
  width: max(var(--board-size-secondary), 6em);
  max-height: 4em;
  padding-bottom: 0.5em;
  display: block;
  overflow: hidden;
}
#command {
  width: max(var(--board-size-secondary), 6em);
  box-sizing: border-box;
  background-color: #8ea36e;
}
